# ESP32 Motor Control (ESP-IDF)

---

## 1. System Requirements

- Ubuntu / Debian Linux
- ESP32 development board
- DC motor with motor driver
- USB cable
- External motor power supply 

---

## 2. Install ESP-IDF (One-Time Setup)

### 2.1 Install system dependencies
```bash
sudo apt update
sudo apt install -y \
  git wget flex bison gperf \
  python3 python3-pip python3-venv \
  cmake ninja-build ccache \
  libffi-dev libssl-dev dfu-util
```

### 2.2 Clone ESP-IDF
```bash
Copy code
mkdir -p ~/esp
cd ~/esp
git clone --recursive https://github.com/espressif/esp-idf.git
```

### 2.3 Install ESP32 toolchain
```bash
Copy code
cd ~/esp/esp-idf
./install.sh esp32
```

### 2.4 Source ESP-IDF (Required in every terminal)
```bash
Copy code
source ~/esp/esp-idf/export.sh
```
Verify:

```bash
Copy code
idf.py --version
```
(Optional – make permanent)
```bash
Copy code
echo 'source ~/esp/esp-idf/export.sh' >> ~/.bashrc
```

## 3. Project Structure
Create the following folder structure:
```
css
Copy code
motor_test/
├── CMakeLists.txt
└── main/
    ├── CMakeLists.txt
    └── main.c
```    

### 3.1 Root CMakeLists.txt
```
cmake_minimum_required(VERSION 3.16)
include($ENV{IDF_PATH}/tools/cmake/project.cmake)
project(motor_test)
```

### 3.2 main/CMakeLists.txt
```
idf_component_register(SRCS "main.c"
                       INCLUDE_DIRS ".")

```

### 3.3 main.c
Insert the motor control code here.

## 4. Generate sdkconfig
sdkconfig is auto-generated by ESP-IDF.
Do NOT create it manually.

From project root:
```
idf.py set-target esp32
idf.py build
```

This creates:

```
sdkconfig
build/
```

## 5. Hardware Wiring (TEST-1)
 *** Update According to motors and mtoro driver ***

6. Build Firmware
```
idf.py build
```

## 7. Flash ESP32
### 7.1 Grant serial permissions (once)
```
sudo usermod -a -G dialout $USER
```
reboot

### 7.2 Flash
```
idf.py flash
```

(Optional monitor)
```
idf.py monitor
```

### 8. Expected Motor Behavior
*** Update as per motor and motor driver logic ***

## 9. Common Issues
*** Update as per experiments during motor controls ***

## 10. Next Steps
*** Update as per the ongoing project ***